{% extends 'base.html' %}

{% block title %}–†–µ–π—Ç–∏–Ω–≥ –∏–≥—Ä–æ–∫–æ–≤ | UmbrellaBet{% endblock %}

{% block content %}
<div class="leaderboard-container">
    <h1 class="leaderboard-title">üèÜ –†–µ–π—Ç–∏–Ω–≥ –∏–≥—Ä–æ–∫–æ–≤</h1>

    <div class="leaderboard-tabs">
        <button class="tab-btn active" data-tab="winners">üí∞ –ü–æ –≤—ã–∏–≥—Ä—ã—à–∞–º</button>
        <button class="tab-btn" data-tab="accuracy">üéØ –ü–æ —Ç–æ—á–Ω–æ—Å—Ç–∏</button>
    </div>

    <!-- –¢–æ–ø –ø–æ –≤—ã–∏–≥—Ä—ã—à–∞–º -->
    <div class="tab-content active" id="winners-tab">
        <div class="leaderboard-list">
            {% for profile in top_winners %}
            <div class="player-card">
                <div class="rank">{{ forloop.counter }}</div>
                <div class="player-info">
                    <div class="player-name">{{ profile.user.username }}</div>
                    <div class="player-stats">
                        <span>–í—ã–∏–≥—Ä–∞–Ω–æ: {{ profile.total_winnings }} ü™ô</span>
                        <span>–°—Ç–∞–≤–æ–∫: {{ profile.total_bets }}</span>
                    </div>
                </div>
                <div class="player-badge">
                    {% if forloop.counter == 1 %}ü•á
                    {% elif forloop.counter == 2 %}ü•à
                    {% elif forloop.counter == 3 %}ü•â
                    {% else %}{{ forloop.counter }}
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- –¢–æ–ø –ø–æ —Ç–æ—á–Ω–æ—Å—Ç–∏ -->
    <div class="tab-content" id="accuracy-tab">
        <div class="leaderboard-list">
            {% for profile in top_accuracy %}
            <div class="player-card">
                <div class="rank">{{ forloop.counter }}</div>
                <div class="player-info">
                    <div class="player-name">{{ profile.user.username }}</div>
                    <div class="player-stats">
                        <span>–¢–æ—á–Ω–æ—Å—Ç—å: {{ profile.win_percentage|floatformat:1 }}%</span>
                        <span>–°—Ç–∞–≤–æ–∫: {{ profile.total_bets }}</span>
                    </div>
                </div>
                <div class="accuracy-badge">{{ profile.win_percentage|floatformat:1 }}%</div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<script>
document.querySelectorAll('.tab-btn').forEach(btn => {
    btn.addEventListener('click', function() {
        const tabId = this.dataset.tab;

        // –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–∞–±—ã
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

        this.classList.add('active');
        document.getElementById(tabId + '-tab').classList.add('active');
    });
});
</script>
{% endblock %}
